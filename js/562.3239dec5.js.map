{"version":3,"file":"js/562.3239dec5.js","mappings":"6SACO,MAAMA,EAAgB,GAChBC,GAAQC,EAAAA,EAAAA,IAAI,GACnB,MAAOC,EAIXC,YAAYC,IAAsB,+EAChC,MAAM,KAAEC,EAAF,IAAQC,GAAQF,EAAOG,wBAC7BC,KAAKC,GAAKC,SAASC,cAAc,QACjCH,KAAKC,GAAGG,UAAUC,IAAI,WACtBL,KAAKC,GAAGK,MAAMT,KAAOA,EAAO,EAAI,KAChCG,KAAKC,GAAGK,MAAMR,IAAMA,EAAM,GAAK,KAC/BI,SAASK,KAAKC,YAAYR,KAAKC,IAC/BD,KAAKF,IAAM,EACXE,KAAKS,KAAM,EACXC,OAAOC,sBAAsBX,KAAKY,MAAMC,KAAKb,OAE/CY,QACEZ,KAAKF,KAAO,EACZE,KAAKC,GAAGK,MAAMQ,UAAY,kBAAkBd,KAAKF,WACjD,MAAM,KAAED,EAAF,IAAQC,EAAR,EAAaiB,GAAMf,KAAKC,GAAGF,wBAEjC,IAAK,IAAIiB,EAAI,EAAGA,EAAIzB,EAAM0B,OAAQD,IAAK,CACrC,MAAME,EAAO3B,EAAMyB,IACXnB,KAAMsB,EAAOrB,IAAKsB,GAASF,EAAKG,UACpCC,KAAKC,IAAIJ,EAAQtB,GAAQ,IAAMyB,KAAKC,IAAIH,EAAOtB,GAAO,KACxDoB,EAAKM,UACLxB,KAAKyB,UAGLzB,KAAKS,MACPC,OAAOC,sBAAsBX,KAAKY,MAAMC,KAAKb,OACzCA,KAAKC,GAAGF,wBAAwBD,IAAM,GACxCE,KAAKyB,UAIXA,SACEzB,KAAKS,KAAM,EACXT,KAAKC,GAAGyB,YAAYC,YAAY3B,KAAKC,KAInC,MAAO2B,EAMXjC,YAAYkC,IAAsB,2IAChC7B,KAAKC,GAAKC,SAASC,cAAc,QACjCH,KAAKC,GAAGG,UAAUC,IAAI,QACtBL,KAAKF,IAAM,EACXE,KAAKS,KAAM,EACXT,KAAK6B,OAASA,EACdA,EAAOrB,YAAYR,KAAKC,IACxB,MAAM,YAAE6B,EAAF,aAAeC,GAAiB/B,KAAK6B,OAC3C7B,KAAKgC,OAASD,EACd/B,KAAKiC,OAAOH,GACZpB,OAAOC,sBAAsBX,KAAKY,MAAMC,KAAKb,OAE/CiC,OAAOH,GACL9B,KAAKC,GAAGK,MAAMT,KAAOqC,EAAiBJ,GAAe,KAEvDlB,QACEZ,KAAKF,KAAO,EACZE,KAAKC,GAAGK,MAAMQ,UAAY,iBAAiBd,KAAKF,WAC5CE,KAAKS,MACPC,OAAOC,sBAAsBX,KAAKY,MAAMC,KAAKb,OACzCA,KAAKC,GAAGF,wBAAwBD,IAAME,KAAKgC,OAAS,IACtDhC,KAAKyB,UAIXA,SACEzB,KAAKS,KAAM,EACXT,KAAKC,GAAGyB,YAAYC,YAAY3B,KAAKC,IACrC,MAAMkC,EAAQ5C,EAAM6C,QAAQpC,MACxBmC,GAAS,GACX5C,EAAM8C,OAAOF,EAAO,GAGxBX,UACExB,KAAKS,KAAM,EACXT,KAAKC,GAAGG,UAAUC,IAAI,SACtBb,EAAM8C,QACNC,YAAW,KACTvC,KAAKC,GAAGyB,YAAYC,YAAY3B,KAAKC,IACrC,MAAMkC,EAAQ5C,EAAM6C,QAAQpC,MACxBmC,GAAS,GACX5C,EAAM8C,OAAOF,EAAO,KAErB,KAELd,UACE,OAAOrB,KAAKC,GAAGF,yBAIZ,MAAMmC,EAAoBM,IAC/B,MAAMC,EAAsB,GACtBC,EAASpB,KAAKqB,KAAKH,EAAcC,GACjCG,EAAYtB,KAAKqB,KAAKrB,KAAKuB,SAAWH,GAC5C,OAAmB,GAAZE","sources":["webpack://fine-admin/./src/views/functional/drag/util.ts"],"sourcesContent":["import { ref } from 'vue';\r\nexport const bombs: Bomb[] = [];\r\nexport const score = ref(0);\r\nexport class Bullet {\r\n  el: HTMLSpanElement;\r\n  top: number;\r\n  can: boolean;\r\n  constructor(target: HTMLDivElement) {\r\n    const { left, top } = target.getBoundingClientRect();\r\n    this.el = document.createElement('span');\r\n    this.el.classList.add('fighter');\r\n    this.el.style.left = left + 8 + 'px';\r\n    this.el.style.top = top - 32 + 'px';\r\n    document.body.appendChild(this.el);\r\n    this.top = 0;\r\n    this.can = true;\r\n    window.requestAnimationFrame(this.start.bind(this));\r\n  }\r\n  start() {\r\n    this.top += 2;\r\n    this.el.style.transform = `translate3d(0,${-this.top}px,0)`;\r\n    const { left, top, x } = this.el.getBoundingClientRect();\r\n\r\n    for (let i = 0; i < bombs.length; i++) {\r\n      const bomb = bombs[i];\r\n      const { left: bLeft, top: bTop } = bomb.getRect();\r\n      if (Math.abs(bLeft - left) < 32 && Math.abs(bTop - top) < 32) {\r\n        bomb.destroy();\r\n        this.remove();\r\n      }\r\n    }\r\n    if (this.can) {\r\n      window.requestAnimationFrame(this.start.bind(this));\r\n      if (this.el.getBoundingClientRect().top < 0) {\r\n        this.remove();\r\n      }\r\n    }\r\n  }\r\n  remove() {\r\n    this.can = false;\r\n    this.el.parentNode?.removeChild(this.el);\r\n  }\r\n}\r\n\r\nexport class Bomb {\r\n  el: HTMLSpanElement;\r\n  parent: HTMLDivElement;\r\n  top: number;\r\n  can: boolean;\r\n  maxTop: number;\r\n  constructor(parent: HTMLDivElement) {\r\n    this.el = document.createElement('span');\r\n    this.el.classList.add('bomb');\r\n    this.top = 0;\r\n    this.can = true;\r\n    this.parent = parent;\r\n    parent.appendChild(this.el);\r\n    const { offsetWidth, offsetHeight } = this.parent;\r\n    this.maxTop = offsetHeight;\r\n    this.create(offsetWidth);\r\n    window.requestAnimationFrame(this.start.bind(this));\r\n  }\r\n  create(offsetWidth: number) {\r\n    this.el.style.left = createRandomLeft(offsetWidth) + 'px';\r\n  }\r\n  start() {\r\n    this.top += 1;\r\n    this.el.style.transform = `translate3d(0,${this.top}px,0)`;\r\n    if (this.can) {\r\n      window.requestAnimationFrame(this.start.bind(this));\r\n      if (this.el.getBoundingClientRect().top > this.maxTop + 80) {\r\n        this.remove();\r\n      }\r\n    }\r\n  }\r\n  remove() {\r\n    this.can = false;\r\n    this.el.parentNode?.removeChild(this.el);\r\n    const index = bombs.indexOf(this);\r\n    if (index > -1) {\r\n      bombs.splice(index, 1);\r\n    }\r\n  }\r\n  destroy() {\r\n    this.can = false;\r\n    this.el.classList.add('blast');\r\n    score.value++;\r\n    setTimeout(() => {\r\n      this.el.parentNode?.removeChild(this.el);\r\n      const index = bombs.indexOf(this);\r\n      if (index > -1) {\r\n        bombs.splice(index, 1);\r\n      }\r\n    }, 300);\r\n  }\r\n  getRect() {\r\n    return this.el.getBoundingClientRect();\r\n  }\r\n}\r\n\r\nexport const createRandomLeft = (regionWidth: number) => {\r\n  const sourceWidth: number = 32;\r\n  const maxNum = Math.ceil(regionWidth / sourceWidth);\r\n  const leftIndex = Math.ceil(Math.random() * maxNum);\r\n  return leftIndex * 32;\r\n};\r\n"],"names":["bombs","score","ref","Bullet","constructor","target","left","top","getBoundingClientRect","this","el","document","createElement","classList","add","style","body","appendChild","can","window","requestAnimationFrame","start","bind","transform","x","i","length","bomb","bLeft","bTop","getRect","Math","abs","destroy","remove","parentNode","removeChild","Bomb","parent","offsetWidth","offsetHeight","maxTop","create","createRandomLeft","index","indexOf","splice","value","setTimeout","regionWidth","sourceWidth","maxNum","ceil","leftIndex","random"],"sourceRoot":""}